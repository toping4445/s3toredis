
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Step-by-step examples: Part 2 &#8212; SnapPy 3.0.3 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/classic.css" />
    
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Step-by-step examples: Part 3" href="ptolemy_examples3.html" />
    <link rel="prev" title="Step-by-step examples: Part 1" href="ptolemy_examples1.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="ptolemy_examples3.html" title="Step-by-step examples: Part 3"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="ptolemy_examples1.html" title="Step-by-step examples: Part 1"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">SnapPy 3.0.3 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="other.html" >Other components</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="ptolemy.html" accesskey="U">The ptolemy module</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Step-by-step examples: Part 2</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="step-by-step-examples-part-2">
<h1>Step-by-step examples: Part 2<a class="headerlink" href="#step-by-step-examples-part-2" title="Permalink to this headline">¶</a></h1>
<section id="the-ptolemy-list-type">
<span id="ptolemy-example-smart-lists"></span><h2>The Ptolemy list type<a class="headerlink" href="#the-ptolemy-list-type" title="Permalink to this headline">¶</a></h2>
<p>Recall that <code class="docutils literal notranslate"><span class="pre">ptolemy_variety</span></code> with <code class="docutils literal notranslate"><span class="pre">obstruction_class='all'</span></code> returns a list of varieties, one for each obstruction class:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">M</span> <span class="o">=</span> <span class="n">Manifold</span><span class="p">(</span><span class="s2">&quot;m003&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">M</span><span class="o">.</span><span class="n">ptolemy_variety</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">obstruction_class</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">)</span>
<span class="go">[Ptolemy Variety for m003, N = 2, obstruction_class = 0</span>
<span class="go">    c_0011_0 * c_0101_0 + c_0011_0^2 - c_0101_0^2</span>
<span class="go">    c_0011_0 * c_0101_0 + c_0011_0^2 - c_0101_0^2</span>
<span class="go">    - 1 + c_0011_0,</span>
<span class="go"> Ptolemy Variety for m003, N = 2, obstruction_class = 1</span>
<span class="go">    - c_0011_0 * c_0101_0 - c_0011_0^2 - c_0101_0^2</span>
<span class="go">    - c_0011_0 * c_0101_0 - c_0011_0^2 - c_0101_0^2</span>
<span class="go">    - 1 + c_0011_0]</span>
</pre></div>
</div>
<p>Also recall that <code class="docutils literal notranslate"><span class="pre">retrieve_solutions</span></code> was a method of a <code class="docutils literal notranslate"><span class="pre">PtolemyVariety</span></code>. Assume we want to call <code class="docutils literal notranslate"><span class="pre">retrieve_solutions</span></code> for each Ptolemy variety. As in the previous example, we could write a loop such as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">retrieve_solutions</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">M</span><span class="o">.</span><span class="n">ptolemy_variety</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;all&#39;</span><span class="p">)]</span>
</pre></div>
</div>
<p>The ptolemy module allows to do this in a much shorter way:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">M</span><span class="o">.</span><span class="n">ptolemy_variety</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;all&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">retrieve_solutions</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="go">[[PtolemyCoordinates(</span>
<span class="go">      {&#39;c_0011_0&#39;: 1,</span>
<span class="go">       &#39;c_0011_1&#39;: -1,</span>
<span class="go">       &#39;c_0101_0&#39;: Mod(x, x^2 - x - 1),</span>
<span class="go">       ...,</span>
<span class="go">       &#39;s_3_1&#39;: 1},</span>
<span class="go">      is_numerical = False, ...)],</span>
<span class="go"> [PtolemyCoordinates(</span>
<span class="go">      {&#39;c_0011_0&#39;: 1,</span>
<span class="go">       &#39;c_0011_1&#39;: -1,</span>
<span class="go">       &#39;c_0101_0&#39;: Mod(x, x^2 + x + 1),</span>
<span class="go">       ...,</span>
<span class="go">       &#39;s_3_1&#39;: 1},</span>
<span class="go">      is_numerical = False, ...)]]</span>
</pre></div>
</div>
<p>This behavior is specific to the ptolemy module. It works with many methods of the ptolemy module that
can potentially return more than one object. These methods return a special kind of list (usually
<code class="docutils literal notranslate"><span class="pre">MethodMappingList</span></code>, a subclass of python <code class="docutils literal notranslate"><span class="pre">list</span></code>) that tries to call the method of the given name (here <code class="docutils literal notranslate"><span class="pre">retrieve_solutions</span></code>) with
the given arguments (here <code class="docutils literal notranslate"><span class="pre">verbose=False</span></code>) on each element in the list (here the two Ptolemy varieties).</p>
<p>Since <code class="docutils literal notranslate"><span class="pre">retrieve_solutions</span></code> itself actually returns a list, the result is a list of lists of solutions which are of type <code class="docutils literal notranslate"><span class="pre">PtolemyCoordinates</span></code>. The first level groups the solutions by obstruction class. The inner lists contain the different (non-Galois conjugate) solutions for each obstruction class (here, for <code class="docutils literal notranslate"><span class="pre">m003</span></code>, each inner lists contains only one element).</p>
</section>
<section id="using-the-ptolemy-list-type-recursively">
<h2>Using the Ptolemy list type recursively<a class="headerlink" href="#using-the-ptolemy-list-type-recursively" title="Permalink to this headline">¶</a></h2>
<p>The list type described in the previous example works recursively. Recall that an algebraic solution to a Ptolemy variety (of type <code class="docutils literal notranslate"><span class="pre">PtolemyCoordinates</span></code>) has a method <code class="docutils literal notranslate"><span class="pre">volume_numerical</span></code> that returns a list of volumes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">M</span><span class="o">=</span><span class="n">Manifold</span><span class="p">(</span><span class="s2">&quot;m003&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">=</span><span class="n">M</span><span class="o">.</span><span class="n">ptolemy_variety</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sol</span><span class="o">=</span><span class="n">p</span><span class="o">.</span><span class="n">retrieve_solutions</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sol</span><span class="o">.</span><span class="n">volume_numerical</span><span class="p">()</span>
<span class="go">[0.E-19, 1.88267370443418 E-14]</span>
</pre></div>
</div>
<p>We can chain these commands together to retrieve the volumes of all boundary-unpotent PSL(2, <strong>C</strong>) (that are <a class="reference internal" href="ptolemy_prelim.html#ptolemy-generically-decorated"><span class="std std-ref">generically decorated</span></a> with respect to the triangulation) in just one line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Manifold</span><span class="p">(</span><span class="s2">&quot;m003&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">ptolemy_variety</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="s1">&#39;all&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">retrieve_solutions</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">volume_numerical</span><span class="p">()</span>
<span class="go">[[[0.E-19, 1.88267370443418 E-14]], [[2.02988321281931, -2.02988321281931]]]</span>
</pre></div>
</div>
<p>Note that the volumes of the representations are in a list of lists of lists. At the first level the volumes are grouped by obstruction class, then by Galois conjugacy.</p>
<p><strong>Remark:</strong> There might be an extra level for witness points.</p>
<p><strong>Remark:</strong> Unfortunately, this is not compatible with tab-autocompletion, see <a class="reference internal" href="#ptolemy-example-missing-auto-completion"><span class="std std-ref">later</span></a>.</p>
</section>
<section id="a-comparison-of-m003-and-m004">
<h2>A comparison of <code class="docutils literal notranslate"><span class="pre">m003</span></code> and <code class="docutils literal notranslate"><span class="pre">m004</span></code><a class="headerlink" href="#a-comparison-of-m003-and-m004" title="Permalink to this headline">¶</a></h2>
<p>We can now compare the set of volumes of <code class="docutils literal notranslate"><span class="pre">m003</span></code> and <code class="docutils literal notranslate"><span class="pre">m004</span></code>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Manifold</span><span class="p">(</span><span class="s2">&quot;m003&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">ptolemy_variety</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="s1">&#39;all&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">retrieve_solutions</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">volume_numerical</span><span class="p">()</span>
<span class="go">[[[0.E-19, 1.88267370443418 E-14]], [[2.02988321281931, -2.02988321281931]]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Manifold</span><span class="p">(</span><span class="s2">&quot;m004&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">ptolemy_variety</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="s1">&#39;all&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">retrieve_solutions</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">volume_numerical</span><span class="p">()</span>
<span class="go">[[], [[-2.02988321281931, 2.02988321281931]]]</span>
</pre></div>
</div>
<p>We see that the two manifolds are distinguished by their volumes of boundary-unipotent representations: <code class="docutils literal notranslate"><span class="pre">m004</span></code> has no representation with trivial volume (this is not a proof as in theory, there could be such a representation which is not <a class="reference internal" href="ptolemy_prelim.html#ptolemy-generically-decorated"><span class="std std-ref">generically decorated</span></a> with respect to the given triangulation) and no representation that can be lifted to a boundary-unipotent SL(2, <strong>C</strong>)-representation.</p>
</section>
<section id="a-non-hyperbolic-example">
<h2>A non-hyperbolic example<a class="headerlink" href="#a-non-hyperbolic-example" title="Permalink to this headline">¶</a></h2>
<p>We can also compute the volumes for a manifold that might be non-hyperbolic, here the complement of the 5<sub>1</sub> knot:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Manifold</span><span class="p">(</span><span class="s2">&quot;5_1&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">ptolemy_variety</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="s1">&#39;all&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">retrieve_solutions</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">volume_numerical</span><span class="p">()</span>
<span class="go">[[], [[1.52310839130992 E-14, 0.E-37]]]</span>
</pre></div>
</div>
<p>Note that one of the Ptolemy varieties is non-empty which proves that all edges of the triangulation are essential. We also see that all volumes are 0 and thus smaller than the volume 2.029883… of the figure-eight knot complement that is proven to be the smallest volume of any orientable cusped manifold. Thus, it follows from Theorem 1.3 and Remark 1.4 of <a class="reference internal" href="ptolemy_prelim.html#ggz2014" id="id1"><span>[GGZ2014]</span></a> that 5<sub>1</sub> is not hyperbolic.</p>
<p><strong>Remark:</strong> The ptolemy module does not (yet) support interval arithmetics, otherwise, this would be a proof that 5<sub>1</sub> is not hyperbolic.</p>
</section>
<section id="flattening-nested-structures">
<h2>Flattening nested structures<a class="headerlink" href="#flattening-nested-structures" title="Permalink to this headline">¶</a></h2>
<p>If we want to loose some of the groupping, we can call <code class="docutils literal notranslate"><span class="pre">flatten</span></code> on the results. Here the grouping by obstruction class is lost:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Manifold</span><span class="p">(</span><span class="s2">&quot;m003&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">ptolemy_variety</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="s1">&#39;all&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">retrieve_solutions</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">volume_numerical</span><span class="p">()</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
<span class="go">[[0.E-19, 1.88267370443418 E-14], [2.02988321281931, -2.02988321281931]]</span>
</pre></div>
</div>
<p>And now, the groupping by Galois conjugacy is lost as well, resulting in a flat list:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Manifold</span><span class="p">(</span><span class="s2">&quot;m003&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">ptolemy_variety</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="s1">&#39;all&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">retrieve_solutions</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">volume_numerical</span><span class="p">()</span><span class="o">.</span><span class="n">flatten</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="go">[0.E-19, 1.88267370443418 E-14, 2.02988321281931, -2.02988321281931]</span>
</pre></div>
</div>
<p>So the result is just a flat list.</p>
<p><strong>Remark:</strong> We cannot <cite>overflatten</cite>. If we give an even larger argument to flatten, the result will just stay a flat list.</p>
</section>
<section id="lack-of-tab-autocompletion-for-nested-structures">
<span id="ptolemy-example-missing-auto-completion"></span><h2>Lack of tab-autocompletion for nested structures<a class="headerlink" href="#lack-of-tab-autocompletion-for-nested-structures" title="Permalink to this headline">¶</a></h2>
<p>Unfortunately, the autocompletion does not list all the desired results when we have a nested structure. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sols</span> <span class="o">=</span> <span class="n">Manifold</span><span class="p">(</span><span class="s2">&quot;m003&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">ptolemy_variety</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="s1">&#39;all&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">retrieve_solutions</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sols</span><span class="o">.</span>
</pre></div>
</div>
<p>When we now hit the tab key:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sols</span><span class="o">.</span>
<span class="go">sols.append   sols.extend   sols.index    sols.pop      sols.reverse</span>
<span class="go">sols.count    sols.flatten  sols.insert   sols.remove   sols.sort</span>
</pre></div>
</div>
<p>… we only get <code class="docutils literal notranslate"><span class="pre">list</span></code> methods, but not the desired <code class="docutils literal notranslate"><span class="pre">volume_numerical</span></code>. One way to discover the available methods is to pick a leaf of the nested structure and hit the tab key:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sol</span> <span class="o">=</span> <span class="n">sols</span><span class="o">.</span><span class="n">flatten</span><span class="p">(</span><span class="mi">100</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sol</span><span class="o">.</span>
<span class="go">sol.N                                   sol.keys</span>
<span class="go">sol.check_against_manifold              sol.long_edge</span>
<span class="gp">...</span>
<span class="go">sol.itervalues                          sol.volume_numerical</span>
</pre></div>
</div>
<p>The overview diagram might also be helpful.</p>
</section>
<section id="converting-exact-solutions-into-numerical-solutions">
<h2>Converting exact solutions into numerical solutions<a class="headerlink" href="#converting-exact-solutions-into-numerical-solutions" title="Permalink to this headline">¶</a></h2>
<p>We can turn exact solutions into numerical solutions by calling <code class="docutils literal notranslate"><span class="pre">numerical</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sol</span> <span class="o">=</span> <span class="n">Manifold</span><span class="p">(</span><span class="s2">&quot;m003&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">ptolemy_variety</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">retrieve_solutions</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sol</span>
<span class="go">PtolemyCoordinates(</span>
<span class="go">    {&#39;c_0011_0&#39;: 1,</span>
<span class="go">     &#39;c_0011_1&#39;: -1,</span>
<span class="go">     &#39;c_0101_0&#39;: Mod(x, x^2 + x + 1),</span>
<span class="go">     ...</span>
<span class="go">     &#39;s_3_1&#39;: 1},</span>
<span class="go">    is_numerical = False, ...)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sol</span><span class="o">.</span><span class="n">numerical</span><span class="p">()</span>
<span class="go">[PtolemyCoordinates(</span>
<span class="go">     {&#39;c_0011_0&#39;: 1,</span>
<span class="go">      &#39;c_0011_1&#39;: -1,</span>
<span class="go">      &#39;c_0101_0&#39;: -0.500000000000000 - 0.866025403784439*I,</span>
<span class="go">      ...,</span>
<span class="go">      &#39;s_3_1&#39;: 1},</span>
<span class="go">     is_numerical = True, ...),</span>
<span class="go"> PtolemyCoordinates(</span>
<span class="go">     {&#39;c_0011_0&#39;: 1,</span>
<span class="go">      &#39;c_0011_1&#39;: -1,</span>
<span class="go">      &#39;c_0101_0&#39;: -0.500000000000000 + 0.866025403784439*I,</span>
<span class="go">      ...,</span>
<span class="go">      &#39;s_3_1&#39;: 1},</span>
<span class="go">     is_numerical = True, ...)]</span>
</pre></div>
</div>
<p>Note that the one exact (algebraic) solution turns into a list of numerical solutions which are Galois conjugates.</p>
<p><strong>Remark:</strong> This uses the current pari precision. See the <a class="reference internal" href="ptolemy_examples1.html#ptolemy-example-increase-precision"><span class="std std-ref">above example</span></a>, in particular, the comment about interval arithmetics.</p>
<p><strong>Remark:</strong> Calling <code class="docutils literal notranslate"><span class="pre">numerical()</span></code> on a numerical solution does nothing.</p>
<p><strong>Remark:</strong> <code class="docutils literal notranslate"><span class="pre">CrossRatios</span></code> also support <code class="docutils literal notranslate"><span class="pre">numerical</span></code>.</p>
</section>
<section id="working-with-exact-vs-numerical-solutions">
<span id="ptolemy-example-numerical-matrix"></span><h2>Working with exact vs numerical solutions<a class="headerlink" href="#working-with-exact-vs-numerical-solutions" title="Permalink to this headline">¶</a></h2>
<p>Most methods such as <code class="docutils literal notranslate"><span class="pre">evaluate_word</span></code> or <code class="docutils literal notranslate"><span class="pre">cross_ratios</span></code> work just the same way on an exact solution:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">exact_sol</span> <span class="o">=</span> <span class="n">Manifold</span><span class="p">(</span><span class="s2">&quot;m004&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">ptolemy_variety</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">retrieve_solutions</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">exact_sol</span>
<span class="go">PtolemyCoordinates(</span>
<span class="go">    {&#39;c_0011_0&#39;: 1,</span>
<span class="go">     &#39;c_0011_1&#39;: -1,</span>
<span class="go">     &#39;c_0101_0&#39;: 1,</span>
<span class="go">     &#39;c_0101_1&#39;: Mod(x, x^2 + x + 1),</span>
<span class="go">     ...,</span>
<span class="go">     &#39;s_3_1&#39;: -1},</span>
<span class="go">    is_numerical = False, ...)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">exact_sol</span><span class="o">.</span><span class="n">evaluate_word</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="go">[[Mod(-2*x, x^2 + x + 1), Mod(-x - 1, x^2 + x + 1)],</span>
<span class="go"> [Mod(x, x^2 + x + 1), Mod(x + 1, x^2 + x + 1)]]</span>
</pre></div>
</div>
<p>… as they do on a numerical solution:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">numerical_sol</span> <span class="o">=</span> <span class="n">sol</span><span class="o">.</span><span class="n">numerical</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">numerical_sol</span>
<span class="go">PtolemyCoordinates(</span>
<span class="go">    {&#39;c_0011_0&#39;: 1,</span>
<span class="go">     &#39;c_0011_1&#39;: -1,</span>
<span class="go">     &#39;c_0101_0&#39;: 1,</span>
<span class="go">     &#39;c_0101_1&#39;: -0.500000000000000 - 0.866025403784439*I,</span>
<span class="go">     ...,</span>
<span class="go">     &#39;s_3_1&#39;: -1},</span>
<span class="go">    is_numerical = False, ...)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">numerical_sol</span><span class="o">.</span><span class="n">evaluate_word</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="go">[[1.00000000000000 + 1.73205080756888*I,</span>
<span class="go">  -0.500000000000000 + 0.866025403784439*I],</span>
<span class="go"> [-0.500000000000000 - 0.866025403784439*I,</span>
<span class="go">  0.500000000000000 - 0.866025403784439*I]]</span>
</pre></div>
</div>
<p>Methods with postfix <code class="docutils literal notranslate"><span class="pre">_numerical</span></code> are special: when applied to an exact solution, they implicitly convert it to a list
of Galois conjugate numerical solutions first. <code class="docutils literal notranslate"><span class="pre">volume_numerical</span></code> is an example (because volume is a transcendental function):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">exact_sol</span><span class="o">.</span><span class="n">volume_numerical</span><span class="p">()</span>
<span class="go">[-2.02988321281931, 2.02988321281931]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">numerical_sol</span><span class="o">.</span><span class="n">volume_numerical</span><span class="p">()</span>
<span class="go">-2.02988321281931</span>
</pre></div>
</div>
</section>
<section id="computing-numerical-solutions-directly">
<span id="ptolemy-example-retrieve-numerical-solutions"></span><h2>Computing numerical solutions directly<a class="headerlink" href="#computing-numerical-solutions-directly" title="Permalink to this headline">¶</a></h2>
<p>We can also directly compute numerical solutions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">M</span> <span class="o">=</span> <span class="n">Manifold</span><span class="p">(</span><span class="s2">&quot;m004&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sols</span> <span class="o">=</span> <span class="n">M</span><span class="o">.</span><span class="n">ptolemy_variety</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="s1">&#39;all&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">retrieve_solutions</span><span class="p">(</span><span class="n">numerical</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
<span class="go">[[],</span>
<span class="go"> [[PtolemyCoordinates(</span>
<span class="go">       {&#39;c_0011_0&#39;: 1.00000000000000 + 0.E-19*I,</span>
<span class="go">        &#39;c_0011_1&#39;: -1.00000000000000 + 0.E-19*I,</span>
<span class="go">        &#39;c_0101_0&#39;: 1.00000000000000 + 0.E-19*I,</span>
<span class="go">        &#39;c_0101_1&#39;: -0.500000000000000 - 0.866025403784439*I,</span>
<span class="go">        ...,</span>
<span class="go">        &#39;s_3_1&#39;: -1},</span>
<span class="go">       is_numerical = True, ...),</span>
<span class="go">   PtolemyCoordinates(</span>
<span class="go">       {&#39;c_0011_0&#39;: 1.00000000000000 + 0.E-19*I,</span>
<span class="go">        &#39;c_0011_1&#39;: -1.00000000000000 + 0.E-19*I,</span>
<span class="go">        &#39;c_0101_0&#39;: 1.00000000000000 + 0.E-19*I,</span>
<span class="go">        &#39;c_0101_1&#39;: -0.500000000000000 + 0.866025403784439*I,</span>
<span class="go">        ...,</span>
<span class="go">        &#39;s_3_1&#39;: -1},</span>
<span class="go">       is_numerical = True, ...)]]]</span>
</pre></div>
</div>
<p>The structure is as described earlier, a list of lists of lists: first solutions are grouped by obstruction class, then by Galois conjugacy.</p>
<p>The advantage over going through the exact solutions is that it might be much faster
(because it can avoid computing the number field from the lexicographic Groebner basis, see later). For example, many PSL(3, <strong>C</strong>) examples only work when using <code class="docutils literal notranslate"><span class="pre">numerical</span> <span class="pre">=</span> <span class="pre">True</span></code>.</p>
</section>
<section id="computing-cross-ratios-from-ptolemy-coordinates">
<span id="ptolemy-example-cross-ratios"></span><h2>Computing cross ratios from Ptolemy coordinates<a class="headerlink" href="#computing-cross-ratios-from-ptolemy-coordinates" title="Permalink to this headline">¶</a></h2>
<p>Given exact or numerical solutions to the Ptolemy variety, we can also compute the cross ratios/shape parameters:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sols</span> <span class="o">=</span> <span class="n">Manifold</span><span class="p">(</span><span class="s2">&quot;m004&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">ptolemy_variety</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="s1">&#39;all&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">retrieve_solutions</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">zs</span><span class="o">=</span><span class="n">sols</span><span class="o">.</span><span class="n">cross_ratios</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">zs</span>
<span class="go">[[],</span>
<span class="go"> [CrossRatios({&#39;z_0000_0&#39;: Mod(x + 1, x^2 + x + 1),</span>
<span class="go">               &#39;z_0000_1&#39;: Mod(x + 1, x^2 + x + 1),</span>
<span class="go">               &#39;zp_0000_0&#39;: Mod(x + 1, x^2 + x + 1),</span>
<span class="go">               &#39;zp_0000_1&#39;: Mod(x + 1, x^2 + x + 1),</span>
<span class="go">               &#39;zpp_0000_0&#39;: Mod(x + 1, x^2 + x + 1),</span>
<span class="go">               &#39;zpp_0000_1&#39;: Mod(x + 1, x^2 + x + 1)},</span>
<span class="go">              is_numerical = False, ...)]]</span>
</pre></div>
</div>
<p><strong>Remark</strong>: The shapes will be given as element in the Ptolemy field with defining polynomial being the second argument to <code class="docutils literal notranslate"><span class="pre">Mod(...,</span> <span class="pre">...)</span></code>, here, x<sup>2</sup>+x+1. The Ptolemy field is a (possibly trivial) extension of the shape field. For <em>N</em> =2, the Ptolemy field is the trace field <a class="reference internal" href="ptolemy_prelim.html#ggz2014" id="id2"><span>[GGZ2014]</span></a> and an iterated square extension of the shape field which is the invariant trace field for a cusped manifold.</p>
<p>And numerically, so that we can compare to SnapPy’s shapes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">zs</span><span class="o">.</span><span class="n">numerical</span><span class="p">()</span>
<span class="go">[[],</span>
<span class="go"> [[CrossRatios(</span>
<span class="go">       {&#39;z_0000_0&#39;: 0.500000000000000 - 0.866025403784439*I,</span>
<span class="go">        &#39;z_0000_1&#39;: 0.500000000000000 - 0.866025403784439*I,</span>
<span class="go">        &#39;zp_0000_0&#39;: 0.500000000000000 - 0.866025403784439*I,</span>
<span class="go">        &#39;zp_0000_1&#39;: 0.500000000000000 - 0.866025403784439*I,</span>
<span class="go">        &#39;zpp_0000_0&#39;: 0.500000000000000 - 0.866025403784439*I,</span>
<span class="go">        &#39;zpp_0000_1&#39;: 0.500000000000000 - 0.866025403784439*I},</span>
<span class="go">       is_numerical = True, ...),</span>
<span class="go">   CrossRatios(</span>
<span class="go">       {&#39;z_0000_0&#39;: 0.500000000000000 + 0.866025403784439*I,</span>
<span class="go">        &#39;z_0000_1&#39;: 0.500000000000000 + 0.866025403784439*I,</span>
<span class="go">        &#39;zp_0000_0&#39;: 0.500000000000000 + 0.866025403784439*I,</span>
<span class="go">        &#39;zp_0000_1&#39;: 0.500000000000000 + 0.866025403784439*I,</span>
<span class="go">        &#39;zpp_0000_0&#39;: 0.500000000000000 + 0.866025403784439*I,</span>
<span class="go">        &#39;zpp_0000_1&#39;: 0.500000000000000 + 0.866025403784439*I},</span>
<span class="go">       is_numerical = True, ...)]]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Manifold</span><span class="p">(</span><span class="s2">&quot;m004&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">tetrahedra_shapes</span><span class="p">(</span><span class="s1">&#39;rect&#39;</span><span class="p">)</span>
<span class="go">[0.5000000000 + 0.8660254038*I, 0.5000000000 + 0.8660254038*I]</span>
</pre></div>
</div>
<p>The result is of type <code class="docutils literal notranslate"><span class="pre">CrossRatios</span></code> and assigns z as well as z’=1/(1-z) and z’’=1-1/z a value.</p>
</section>
<section id="the-dimension-of-a-component">
<span id="ptolemy-non-zero-dim-comp"></span><h2>The dimension of a component<a class="headerlink" href="#the-dimension-of-a-component" title="Permalink to this headline">¶</a></h2>
<p>A Ptolemy variety might have positively dimensional components (note that this might or might not be a positively dimensional family of representations, see <a class="reference internal" href="ptolemy_prelim.html#ptolemy-generically-decorated"><span class="std std-ref">here</span></a>). For example, the Ptolemy variety for <code class="docutils literal notranslate"><span class="pre">m371</span></code> and the trivial obstruction class has a 1-dimensional component. This is indicated by:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">M</span><span class="o">.</span><span class="n">ptolemy_variety</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">retrieve_solutions</span><span class="p">()</span>
<span class="go">[NonZeroDimensionalComponent(dimension = 1)]</span>
</pre></div>
</div>
<p>Or:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">M</span><span class="o">=</span><span class="n">Manifold</span><span class="p">(</span><span class="s2">&quot;m371&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">M</span><span class="o">.</span><span class="n">ptolemy_variety</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">retrieve_solutions</span><span class="p">()</span>
<span class="go">[[ PtolemyCoordinates(</span>
<span class="go">       {&#39;c_0011_0&#39;: 1,</span>
<span class="go">        &#39;c_0011_1&#39;: -1,</span>
<span class="go">        &#39;c_0011_2&#39;: -1,</span>
<span class="go">        &#39;c_0011_3&#39;: Mod(-x - 1, x^2 + x + 2),</span>
<span class="go">        ...,</span>
<span class="go">        &#39;s_3_4&#39;: 1},</span>
<span class="go">       is_numerical = False, ...)</span>
<span class="go">   (witnesses for NonZeroDimensionalComponent(dimension = 1, free_variables = [&#39;c_0110_2&#39;])) ]]</span>
</pre></div>
</div>
<p>The latter actually also provides a sample point (<a class="reference internal" href="ptolemy_examples3.html#ptolemy-example-find-witness"><span class="std std-ref">witness</span></a> which we will use <a class="reference internal" href="ptolemy_examples3.html#ptolemy-example-non-zero-dim-rep"><span class="std std-ref">later</span></a> to determine whether this corresponds to a 1-dimensional family of representations or not) on the 1-dimensional component. A <code class="docutils literal notranslate"><span class="pre">NonZeroDimensionalComponent</span></code> as well as <code class="docutils literal notranslate"><span class="pre">PtolemyCoordinates</span></code> (that correspond to 0-dimensional components of the Ptolemy variety)) has a <code class="docutils literal notranslate"><span class="pre">dimension</span></code> attribute, so we can do:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">M</span><span class="o">=</span><span class="n">Manifold</span><span class="p">(</span><span class="s2">&quot;m371&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sols</span> <span class="o">=</span> <span class="n">M</span><span class="o">.</span><span class="n">ptolemy_variety</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="s1">&#39;all&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">retrieve_solutions</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sols</span><span class="o">.</span><span class="n">dimension</span>
<span class="go">[[1], [], [0], []]</span>
</pre></div>
</div>
<p>This means that the Ptolemy variety for the trivial obstruction class has a 1-dimensional component and that the Ptolemy variety of one of the other obstruction classes a 0-dimensional component.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">NonZeroDimensionalComponent</span></code> is actually again a list whose elements will be witness points if witnesses have been computed for this Ptolemy variety.</p>
<p><strong>Warning:</strong> This implies that if we <code class="docutils literal notranslate"><span class="pre">flatten</span></code> too much, the reported dimension becomes 0 which is the dimension of the witness point instead of 1:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sols</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
<span class="go">[1, 0]</span>
</pre></div>
</div>
<p>Too much <code class="docutils literal notranslate"><span class="pre">flatten</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sols</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
<span class="go">[0, 0]</span>
</pre></div>
</div>
<p>The advantage is that we can still call methods such as <code class="docutils literal notranslate"><span class="pre">volume_numerical</span></code> and actually see the volume of a witness point (it is known that the volume stays constant on a component of boundary-unipotent representations, so one witness point can tell us the volume of all representation in that component):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sols</span><span class="o">.</span><span class="n">volume_numerical</span><span class="p">()</span>
<span class="go">[[[ [0.E-38, 0.E-38] (witnesses for NonZeroDimensionalComponent(dimension = 1, free_variables = [&#39;c_0110_2&#39;])) ]],</span>
<span class="go"> [],</span>
<span class="go"> [[4.75170196551790,</span>
<span class="go">   -4.75170196551790,</span>
<span class="go">   4.75170196551790,</span>
<span class="go">   -4.75170196551790,</span>
<span class="go">   1.17563301006556,</span>
<span class="go">   -1.17563301006556,</span>
<span class="go">   1.17563301006556,</span>
<span class="go">   -1.17563301006556]],</span>
<span class="go"> []]</span>
</pre></div>
</div>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Step-by-step examples: Part 2</a><ul>
<li><a class="reference internal" href="#the-ptolemy-list-type">The Ptolemy list type</a></li>
<li><a class="reference internal" href="#using-the-ptolemy-list-type-recursively">Using the Ptolemy list type recursively</a></li>
<li><a class="reference internal" href="#a-comparison-of-m003-and-m004">A comparison of <code class="docutils literal notranslate"><span class="pre">m003</span></code> and <code class="docutils literal notranslate"><span class="pre">m004</span></code></a></li>
<li><a class="reference internal" href="#a-non-hyperbolic-example">A non-hyperbolic example</a></li>
<li><a class="reference internal" href="#flattening-nested-structures">Flattening nested structures</a></li>
<li><a class="reference internal" href="#lack-of-tab-autocompletion-for-nested-structures">Lack of tab-autocompletion for nested structures</a></li>
<li><a class="reference internal" href="#converting-exact-solutions-into-numerical-solutions">Converting exact solutions into numerical solutions</a></li>
<li><a class="reference internal" href="#working-with-exact-vs-numerical-solutions">Working with exact vs numerical solutions</a></li>
<li><a class="reference internal" href="#computing-numerical-solutions-directly">Computing numerical solutions directly</a></li>
<li><a class="reference internal" href="#computing-cross-ratios-from-ptolemy-coordinates">Computing cross ratios from Ptolemy coordinates</a></li>
<li><a class="reference internal" href="#the-dimension-of-a-component">The dimension of a component</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="ptolemy_examples1.html"
                        title="previous chapter">Step-by-step examples: Part 1</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="ptolemy_examples3.html"
                        title="next chapter">Step-by-step examples: Part 3</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/ptolemy_examples2.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="ptolemy_examples3.html" title="Step-by-step examples: Part 3"
             >next</a> |</li>
        <li class="right" >
          <a href="ptolemy_examples1.html" title="Step-by-step examples: Part 1"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">SnapPy 3.0.3 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="other.html" >Other components</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="ptolemy.html" >The ptolemy module</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Step-by-step examples: Part 2</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2009-2021, by Marc Culler, Nathan Dunfield, Matthias Goerner, Jeffrey Weeks and others.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.3.1.
    </div>
  </body>
</html>